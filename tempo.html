<!DOCTYPE html>
<html>
<head>
	<title>Tempo</title>

	<!-- css -->
	<link href='css/tempo.css' rel='stylesheet' type='text/css'>

	<!-- fonts -->
	<link href='https://fonts.googleapis.com/css?family=Lato:400,300,700' rel='stylesheet' type='text/css'>

	<!-- code delivery network -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/queue-async/1.0.7/queue.min.js"></script>
	<!--
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
	-->

	<!-- local libraries -->
	<script src='lib/papaparse.min.js' type='text/javascript'></script>
	<script src='lib/sylvester.js' type='text/javascript'></script>
	<script src='lib/glUtils.js' type='text/javascript'></script>

	<!-- common ui components -->
	<script src="src/listselection.js" type="text/javascript"></script>

	<!-- sources -->
	<script src="src/ecodata.js" type="text/javascript"></script>
	<script src="src/timeseries.js" type="text/javascript"></script>
	<script src="src/slider.js" type="text/javascript"></script>
	<script src="src/tempo.js" type="text/javascript"></script>
	<script src="src/ui_utils.js" type="text/javascript"></script>

	<style>
		body {
			font-family: 'Lato', sans-serif;
			font-weight: 300;
			font-size: 12px;
			margin: 0px 0px;
			-webkit-touch-callout: none;
			-webkit-user-select: none;
			-khtml-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;
			pointer: default;
		}

		div.appTitle {
			font-size: 17px;
			font-weight: 400;
			color: white;
			padding: 5px 15px;
			background-color: #4e4e4e;
		}

		div.visSpace {
			height: 800px;
			margin: 10px 10px;
		}

		#visSVG {
			border: 1px dashed #cccccc;
		}

		#visCanvas {
			position: absolute;
			top: 0px;
			left: 0px;
			z-index: 100;
			pointer-events: none;
		}

		#interactSVG {
			position: absolute;
			top: 0px; left: 0px;
			z-index: 200;
			pointer-events: none;
		}

		.rangeSlider {
			stroke: none;
			/*fill: rgba(153, 204, 255, 0.85);*/
			fill: rgba(179, 217, 255, 0.85);

		}

	</style>
</head>
<body>
	<!-- app title -->
	<div class="appTitle" width="100%">
		<b>Tempo</b> - Visualization of (many) time series
	</div>

	<!-- visualization space -->
	<div class="visSpace" width="100%">
		<svg id="visSVG" width="100%" height="100%" style="border: 1px dashed #cccccc"></svg>
		<canvas id="visCanvas"></canvas>
		<svg id="interactSVG" width="0" height="0"></svg>
	</div>

	<script type="text/javascript">
		var tempo = null;
		var theData = null;		// global object containing EcoTimeseries
		var TIMESERIES_DATA = [
			'data/indices_mid-day_avg_prep_02-21-2016g_flagExcluded.csv',
			'data/EcoSpec_Summer_2015_GPP_Reco_data_new_DOY-shifted.csv',
			'data/Decagon_NDVI_&_PRI_02-27-2017_30min.csv'
		];

		function resizeWindow()
		{
			var visSVG = document.getElementById('visSVG');
			var bounding = visSVG.getBoundingClientRect();
			var w = bounding.right-bounding.left;
			var h = bounding.bottom-bounding.top;

			// position the canvas and interaction SVG accordingly
			var canvas = d3.select("#visCanvas")
				.style("top", bounding.top + "px").style("left", bounding.left + "px")
				.attr("width", w)
				.attr("height", h);

			// position the interaction SVG on top of the canvas
			var interactSVG = d3.select("#interactSVG")
				.style("top", bounding.top + "px").style("left", bounding.left + "px")
				.attr("width", w)
				.attr("height", h);

			// update tempo
			if (tempo) {
				tempo.resizeWindow();
			}
		}
		window.onresize = resizeWindow;
		
		// fire up things
		function fireup() {
			resizeWindow();

			// initialize the vis
			tempo = new Tempo();
		}

		fireup();
		
		/*
		// jQuery initialization
		$(document).ready(function() 
		{
			fireup();
		});
		*/


	</script>
</body>
</html>
